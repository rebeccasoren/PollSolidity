{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/nixi/EthWorkspace/poll/pages/ongoing/add.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport Layout from '../../components/Layout';\nimport { Form, Button, Message, Container } from 'semantic-ui-react';\nimport { Router } from '../../routes';\nimport web3 from '../../ethereum/web3';\nimport poll from '../../ethereum/poll';\n\nclass Add extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      message: '',\n      loading: false,\n      description: ''\n    });\n\n    _defineProperty(this, \"onSubmit\", async event => {\n      event.preventDefault();\n      this.setState({\n        message: '',\n        loading: true\n      });\n\n      try {\n        const accounts = await web3.eth.getAccounts();\n        await poll.methods.askQuestion(this.state.description).send({\n          from: accounts[0]\n        });\n        Router.pushRoute(`/ongoing`);\n      } catch (err) {\n        this.setState({\n          message: err.message\n        });\n      }\n\n      this.setState({\n        loading: false\n      });\n    });\n  }\n\n  render() {\n    return __jsx(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, __jsx(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }, __jsx(Form, {\n      inverted: true,\n      onSubmit: this.onSubmit,\n      error: !!this.state.message,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, __jsx(Form.Input, {\n      width: 6,\n      label: \"Question\",\n      value: this.state.description,\n      onChange: event => this.setState({\n        description: event.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), __jsx(Message, {\n      error: true,\n      header: \"Oops\",\n      content: this.state.message,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }), __jsx(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Add Question\")))));\n  }\n\n}\n\nexport default Add;","map":{"version":3,"sources":["/home/nixi/EthWorkspace/poll/pages/ongoing/add.js"],"names":["React","Component","Layout","Form","Button","Message","Container","Router","web3","poll","Add","message","loading","description","event","preventDefault","setState","accounts","eth","getAccounts","methods","askQuestion","state","send","from","pushRoute","err","render","onSubmit","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AACA,SAAQC,IAAR,EAAcC,MAAd,EAAsBC,OAAtB,EAA+BC,SAA/B,QAA+C,mBAA/C;AACA,SAAQC,MAAR,QAAqB,cAArB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;AACA,OAAOC,IAAP,MAAiB,qBAAjB;;AAEA,MAAMC,GAAN,SAAkBT,SAAlB,CAA2B;AAAA;AAAA;;AAAA,mCACjB;AACFU,MAAAA,OAAO,EAAE,EADP;AAEFC,MAAAA,OAAO,EAAE,KAFP;AAGFC,MAAAA,WAAW,EAAE;AAHX,KADiB;;AAAA,sCAOZ,MAAOC,KAAP,IAAgB;AACvBA,MAAAA,KAAK,CAACC,cAAN;AACA,WAAKC,QAAL,CAAc;AACVL,QAAAA,OAAO,EAAE,EADC;AAEVC,QAAAA,OAAO,EAAE;AAFC,OAAd;;AAKA,UAAG;AACC,cAAMK,QAAQ,GAAG,MAAMT,IAAI,CAACU,GAAL,CAASC,WAAT,EAAvB;AACA,cAAMV,IAAI,CAACW,OAAL,CACLC,WADK,CACO,KAAKC,KAAL,CAAWT,WADlB,EAELU,IAFK,CAEA;AACFC,UAAAA,IAAI,EAACP,QAAQ,CAAC,CAAD;AADX,SAFA,CAAN;AAKAV,QAAAA,MAAM,CAACkB,SAAP,CAAkB,UAAlB;AACH,OARD,CASA,OAAOC,GAAP,EAAW;AACP,aAAKV,QAAL,CAAc;AAACL,UAAAA,OAAO,EAAEe,GAAG,CAACf;AAAd,SAAd;AACH;;AACD,WAAKK,QAAL,CAAc;AACVJ,QAAAA,OAAO,EAAE;AADC,OAAd;AAGH,KA7BsB;AAAA;;AA+BvBe,EAAAA,MAAM,GAAE;AACJ,WACI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,IAAD;AAAM,MAAA,QAAQ,MAAd;AAAe,MAAA,QAAQ,EAAE,KAAKC,QAA9B;AAAwC,MAAA,KAAK,EAAE,CAAC,CAAC,KAAKN,KAAL,CAAWX,OAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,MAAC,IAAD,CAAM,KAAN;AACI,MAAA,KAAK,EAAE,CADX;AACc,MAAA,KAAK,EAAC,UADpB;AAEI,MAAA,KAAK,EAAE,KAAKW,KAAL,CAAWT,WAFtB;AAGI,MAAA,QAAQ,EAAEC,KAAK,IAAI,KAAKE,QAAL,CAAc;AAACH,QAAAA,WAAW,EAAEC,KAAK,CAACe,MAAN,CAAaC;AAA3B,OAAd,CAHvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAMI,MAAC,OAAD;AAAS,MAAA,KAAK,MAAd;AAAe,MAAA,MAAM,EAAC,MAAtB;AAA6B,MAAA,OAAO,EAAE,KAAKR,KAAL,CAAWX,OAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MANJ,EAOI,MAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAPJ,CADJ,CADJ,CADJ,CADJ;AAiBH;;AAjDsB;;AAmD3B,eAAeD,GAAf","sourcesContent":["import React, {Component} from 'react';\nimport Layout from '../../components/Layout';\nimport {Form, Button, Message, Container} from 'semantic-ui-react';\nimport {Router} from '../../routes';\nimport web3 from '../../ethereum/web3';\nimport poll from '../../ethereum/poll';\n\nclass Add extends Component{\n    state={\n        message: '',\n        loading: false,\n        description: ''\n    }\n\n    onSubmit = async (event) =>{\n        event.preventDefault();\n        this.setState({\n            message: '',\n            loading: true\n        });\n\n        try{\n            const accounts = await web3.eth.getAccounts();\n            await poll.methods\n            .askQuestion(this.state.description)\n            .send({\n                from:accounts[0]\n            });\n            Router.pushRoute(`/ongoing`);\n        }\n        catch (err){\n            this.setState({message: err.message});\n        }\n        this.setState({\n            loading: false\n        });\n    }\n\n    render(){\n        return(\n            <Layout>\n                <Container>\n                    <center>\n                        <Form inverted onSubmit={this.onSubmit} error={!!this.state.message}>\n                            <Form.Input \n                                width={6} label='Question'\n                                value={this.state.description}\n                                onChange={event => this.setState({description: event.target.value})}    \n                            />\n                            <Message error header=\"Oops\" content={this.state.message} />\n                            <Button>Add Question</Button>\n                        </Form>\n                    </center>\n                </Container>\n            </Layout>\n        );\n    }\n}\nexport default Add;"]},"metadata":{},"sourceType":"module"}